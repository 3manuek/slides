<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 685.69921875 683.671875" style="max-width: 685.699px; background-color: transparent;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph0" class="cluster"><rect height="128" width="605.46484375" y="419.671875" x="15.78125" style=""/><g transform="translate(265.185546875, 419.671875)" class="cluster-label"><foreignObject height="24" width="106.65625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Patroni Cluster</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_Client_HAProxy_0" d="M218.473,65.672L218.473,69.839C218.473,74.005,218.473,82.339,218.473,88.589C218.473,94.839,218.473,99.005,218.473,102.505C218.473,106.005,218.473,108.839,218.473,110.255L218.473,111.672"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_HAProxy_pgbouncer_1" d="M223.881,193.672L224.736,199.839C225.591,206.005,227.301,218.339,228.157,227.589C229.012,236.839,229.012,243.005,229.012,248.505C229.012,254.005,229.012,258.839,229.012,261.255L229.012,263.672"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_HAProxy_patroni1_2" d="M134.986,193.672L121.785,199.839C108.585,206.005,82.183,218.339,68.982,235.172C55.781,252.005,55.781,273.339,55.781,296.672C55.781,320.005,55.781,345.339,55.781,366.172C55.781,387.005,55.781,403.339,58.349,413.589C60.917,423.839,66.052,428.005,70.67,431.752C75.288,435.498,79.388,438.825,81.439,440.488L83.489,442.152"/><path marker-end="url(#my-svg_flowchart-v2-crossEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_HAProxy_patroni2_3" d="M304.863,188.77L322.557,195.753C340.251,202.737,375.639,216.704,393.333,234.355C411.027,252.005,411.027,273.339,411.027,296.672C411.027,320.005,411.027,345.339,411.027,366.172C411.027,387.005,411.027,403.339,413.169,413.589C415.31,423.839,419.592,428.005,423.874,432.172C428.157,436.339,432.439,440.505,434.58,442.589L436.722,444.672"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_patroni1_pgbouncer_4" d="M216.192,444.672L224.902,440.505C233.612,436.339,251.033,428.005,259.743,415.672C268.453,403.339,268.453,387.005,266.334,374.755C264.215,362.505,259.977,354.339,256.046,346.764C252.114,339.189,248.49,332.205,246.678,328.714L244.866,325.222"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_patroni2_pgbouncer_5" d="M552.636,444.672L560.738,440.505C568.839,436.339,585.043,428.005,593.144,415.672C601.246,403.339,601.246,387.005,577.589,374.008C553.931,361.011,506.616,351.351,459.954,341.824C413.292,332.297,367.283,322.903,344.279,318.206L321.275,313.509"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_pgbouncer_patroni1_6" d="M208.758,321.672L202.631,329.839C196.505,338.005,184.253,354.339,178.126,370.672C172,387.005,172,403.339,170.785,413.589C169.569,423.839,167.139,428.005,165.044,431.596C162.949,435.187,161.19,438.202,160.311,439.709L159.431,441.217"/><path marker-end="url(#my-svg_flowchart-v2-crossEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_pgbouncer_patroni2_7" d="M313.884,321.672L339.555,329.839C365.226,338.005,416.568,354.339,442.239,370.672C467.91,387.005,467.91,403.339,468.2,413.589C468.489,423.839,469.068,428.005,469.647,432.172C470.226,436.339,470.806,440.505,471.095,442.589L471.385,444.672"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" marker-start="url(#my-svg_flowchart-v2-pointStart)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_patroni1_etcd_8" d="M134.664,526.672L134.664,530.172C134.664,533.672,134.664,540.672,134.664,548.339C134.664,556.005,134.664,564.339,142.894,571.033C151.124,577.728,167.583,582.784,183.406,587.644C199.228,592.504,214.413,597.169,222.006,599.501L229.598,601.833"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" marker-start="url(#my-svg_flowchart-v2-pointStart)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_patroni2_etcd_9" d="M476.805,526.672L476.805,530.172C476.805,533.672,476.805,540.672,476.805,548.339C476.805,556.005,476.805,564.339,472.45,570.589C468.094,576.839,459.384,581.005,451.275,584.884C443.167,588.763,435.659,592.354,431.905,594.15L428.152,595.946"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(229.01171875, 230.671875)" class="edgeLabel"><g transform="translate(-47.5, -12)" class="label"><foreignObject height="24" width="95"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Writer traffic</p></span></div></foreignObject></g></g><g transform="translate(55.78125, 294.671875)" class="edgeLabel"><g transform="translate(-47.78125, -24)" class="label"><foreignObject height="48" width="95.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p><em>REST API</em> <br /><em>Health Check</em></p></span></div></foreignObject></g></g><g transform="translate(411.02734375, 294.671875)" class="edgeLabel"><g transform="translate(-47.78125, -24)" class="label"><foreignObject height="48" width="95.5625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p><em>REST API</em> <br /><em>Health Check</em></p></span></div></foreignObject></g></g><g transform="translate(268.453125, 370.671875)" class="edgeLabel"><g transform="translate(-76.453125, -24)" class="label"><foreignObject height="48" width="152.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>on_reload callback <br />Update pgbouncer.ini</p></span></div></foreignObject></g></g><g transform="translate(601.24609375, 370.671875)" class="edgeLabel"><g transform="translate(-76.453125, -24)" class="label"><foreignObject height="48" width="152.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>on_reload callback <br />Update pgbouncer.ini</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(467.91015625, 370.671875)" class="edgeLabel"><g transform="translate(-36.8828125, -12)" class="label"><foreignObject height="24" width="73.765625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Not active</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(218.47265625, 154.671875)" id="flowchart-HAProxy-0" class="node default"><rect height="78" width="172.78125" y="-39" x="-86.390625" style="" class="basic label-container"/><g transform="translate(-56.390625, -24)" style="" class="label"><rect/><foreignObject height="48" width="112.78125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>HAProxy<br />(Load Balancer)</p></span></div></foreignObject></g></g><g transform="translate(343.015625, 636.671875)" id="flowchart-etcd-1" class="node default"><rect height="78" width="219.1875" y="-39" x="-109.59375" style="" class="basic label-container"/><g transform="translate(-79.59375, -24)" style="" class="label"><rect/><foreignObject height="48" width="159.1875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>etcd<br />(Cluster Coordination)</p></span></div></foreignObject></g></g><g transform="translate(229.01171875, 294.671875)" id="flowchart-pgbouncer-2" class="node default"><rect height="54" width="176.6875" y="-27" x="-88.34375" style="" class="basic label-container"/><g transform="translate(-58.34375, -12)" style="" class="label"><rect/><foreignObject height="24" width="116.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>PgBouncer Fleet</p></span></div></foreignObject></g></g><g transform="translate(134.6640625, 483.671875)" id="flowchart-patroni1-3" class="node default"><rect height="78" width="167.765625" y="-39" x="-83.8828125" style="" class="basic label-container"/><g transform="translate(-53.8828125, -24)" style="" class="label"><rect/><foreignObject height="48" width="107.765625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>patroni1<br />(Primary Node)</p></span></div></foreignObject></g></g><g transform="translate(476.8046875, 483.671875)" id="flowchart-patroni2-4" class="node default"><rect height="78" width="169.921875" y="-39" x="-84.9609375" style="" class="basic label-container"/><g transform="translate(-54.9609375, -24)" style="" class="label"><rect/><foreignObject height="48" width="109.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>patroni2<br />(Standby Node)</p></span></div></foreignObject></g></g><g transform="translate(218.47265625, 36.8359375)" id="flowchart-Client-5" class="node default"><circle cy="0" cx="0" r="28.8359375" style="" class="basic label-container"/><g transform="translate(-21.3359375, -12)" style="" class="label"><rect/><foreignObject height="24" width="42.671875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Client</p></span></div></foreignObject></g></g></g></g></g></svg>