<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1182.265625 1118" style="max-width: 1182.27px; background-color: transparent;" class="flowchart" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="my-svg"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="my-svg_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="my-svg_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"><g data-look="classic" id="subGraph3" class="cluster"><rect height="248" width="319.78125" y="8" x="13.109375" style=""/><g transform="translate(88.6015625, 8)" class="cluster-label"><foreignObject height="24" width="168.796875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Example Consul Service</p></span></div></foreignObject></g></g><g data-look="classic" id="Prometheus" class="cluster"><rect height="304" width="279.203125" y="806" x="473.66015625" style=""/><g transform="translate(571.25390625, 806)" class="cluster-label"><foreignObject height="24" width="84.015625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Prometheus</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph1" class="cluster"><rect height="248" width="921.1328125" y="508" x="124.7109375" style=""/><g transform="translate(517.51953125, 508)" class="cluster-label"><foreignObject height="24" width="135.515625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Target Registration</p></span></div></foreignObject></g></g><g data-look="classic" id="subGraph0" class="cluster"><rect height="152" width="1166.265625" y="306" x="8" style=""/><g transform="translate(496.8828125, 306)" class="cluster-label"><foreignObject height="24" width="188.5"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Service Discovery Methods</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_SD_CONSUL_REG_0" d="M173,433L173,437.167C173,441.333,173,449.667,173,458C173,466.333,173,474.667,173,483C173,491.333,173,499.667,198.855,511.115C224.71,522.564,276.421,537.128,327.489,551.512C378.558,565.895,428.985,580.098,454.198,587.2L479.412,594.301"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_SD_FILE_REG_1" d="M473.406,421L473.406,427.167C473.406,433.333,473.406,445.667,473.406,456C473.406,466.333,473.406,474.667,473.406,483C473.406,491.333,473.406,499.667,475.756,505.917C478.106,512.167,482.805,516.333,487.006,520.058C491.206,523.782,494.908,527.064,496.759,528.705L498.61,530.346"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_SD_K8S_REG_2" d="M753.117,421L753.117,427.167C753.117,433.333,753.117,445.667,753.117,456C753.117,466.333,753.117,474.667,753.117,483C753.117,491.333,753.117,499.667,750.767,505.917C748.418,512.167,743.718,516.333,739.518,520.058C735.317,523.782,731.615,527.064,729.764,528.705L727.914,530.346"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_SD_EC2_REG_3" d="M1025.844,421L1025.844,427.167C1025.844,433.333,1025.844,445.667,1025.844,456C1025.844,466.333,1025.844,474.667,1025.844,483C1025.844,491.333,1025.844,499.667,1002.295,510.911C978.747,522.155,931.65,536.31,885.191,550.273C838.733,564.236,792.913,578.007,770.002,584.892L747.092,591.778"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_REG_PROM_4" d="M613.262,731L613.262,735.167C613.262,739.333,613.262,747.667,613.262,756C613.262,764.333,613.262,772.667,613.262,781C613.262,789.333,613.262,797.667,613.262,803.917C613.262,810.167,613.262,814.333,613.262,817.833C613.262,821.333,613.262,824.167,613.262,825.583L613.262,827"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_PROM_RELABEL_5" d="M613.262,885L613.262,889.167C613.262,893.333,613.262,901.667,613.262,907.917C613.262,914.167,613.262,918.333,613.262,921.833C613.262,925.333,613.262,928.167,613.262,929.583L613.262,931"/><path marker-end="url(#my-svg_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CONSUL_SVC_SD_CONSUL_6" d="M173,231L173,235.167C173,239.333,173,247.667,173,256C173,264.333,173,272.667,173,281C173,289.333,173,297.667,173,303.917C173,310.167,173,314.333,173,317.833C173,321.333,173,324.167,173,325.583L173,327"/></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(173, 382)" id="flowchart-SD_CONSUL-0" class="node default"><rect height="102" width="260" y="-51" x="-130" style="fill:#3498db !important;stroke:#2980b9 !important;stroke-width:2px !important" class="basic label-container"/><g transform="translate(-100, -36)" style="" class="label"><rect/><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Consul SD<br />Dynamic Service Registration</p></span></div></foreignObject></g></g><g transform="translate(473.40625, 382)" id="flowchart-SD_FILE-1" class="node default"><rect height="78" width="240.8125" y="-39" x="-120.40625" style="" class="basic label-container"/><g transform="translate(-90.40625, -24)" style="" class="label"><rect/><foreignObject height="48" width="180.8125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>File SD<br />Static Configuration Files</p></span></div></foreignObject></g></g><g transform="translate(753.1171875, 382)" id="flowchart-SD_K8S-2" class="node default"><rect height="78" width="218.609375" y="-39" x="-109.3046875" style="" class="basic label-container"/><g transform="translate(-79.3046875, -24)" style="" class="label"><rect/><foreignObject height="48" width="158.609375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Kubernetes SD<br />Pod/Service Discovery</p></span></div></foreignObject></g></g><g transform="translate(1025.84375, 382)" id="flowchart-SD_EC2-3" class="node default"><rect height="78" width="226.84375" y="-39" x="-113.421875" style="" class="basic label-container"/><g transform="translate(-83.421875, -24)" style="" class="label"><rect/><foreignObject height="48" width="166.84375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>EC2 SD<br />AWS Instance Discovery</p></span></div></foreignObject></g></g><g transform="translate(613.26171875, 632)" id="flowchart-REG-4" class="node default"><rect height="198" width="260" y="-99" x="-130" style="" class="basic label-container"/><g transform="translate(-100, -84)" style="" class="label"><rect/><foreignObject height="168" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Service Registration:<br />├─ Cluster: production<br />├─ Role: primary/replica<br />├─ Environment: prod/staging<br />├─ Region: us-east-1<br />└─ Version: PostgreSQL 16</p></span></div></foreignObject></g></g><g transform="translate(613.26171875, 858)" id="flowchart-PROM-5" class="node default"><rect height="54" width="194.265625" y="-27" x="-97.1328125" style="fill:#e67e22 !important;stroke:#ca6f1e !important;stroke-width:3px !important" class="basic label-container"/><g transform="translate(-67.1328125, -12)" style="" class="label"><rect/><foreignObject height="24" width="134.265625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Prometheus Server</p></span></div></foreignObject></g></g><g transform="translate(613.26171875, 1010)" id="flowchart-RELABEL-6" class="node default"><rect height="150" width="209.203125" y="-75" x="-104.6015625" style="" class="basic label-container"/><g transform="translate(-74.6015625, -60)" style="" class="label"><rect/><foreignObject height="120" width="149.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Relabel Config:<br />├─ Add cluster label<br />├─ Add role label<br />├─ Add environment<br />└─ Filter by tags</p></span></div></foreignObject></g></g><g transform="translate(173, 132)" id="flowchart-CONSUL_SVC-7" class="node default"><rect height="198" width="249.78125" y="-99" x="-124.890625" style="" class="basic label-container"/><g transform="translate(-94.890625, -84)" style="" class="label"><rect/><foreignObject height="168" width="189.78125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Service: postgres-exporter<br />Tags: [primary, prod]<br />Meta:<br />  cluster: prod-cluster-1<br />  region: us-east-1<br />Address: 10.0.1.10<br />Port: 9187</p></span></div></foreignObject></g></g></g></g></g></svg>